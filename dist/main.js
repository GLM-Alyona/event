(()=>{"use strict";const t=new class{constructor(){this.board=null}createBoard(t){const e=document.createElement("div");e.classList.add("board"),e.classList.add("hammer");for(let s=0;s<Math.floor(t)**2;s+=1){const t=document.createElement("div");t.classList.add("cell"),e.appendChild(t)}return this.board=e,this.board}},e=new class{constructor(){this.char=null}createCharacter(){const t=document.createElement("div");return t.classList.add("goblin"),this.char=t,this.char}},s=new class{constructor(t,e){this.board=t,this.char=e,this.boardSize=4,this.startPosition=null,this.boardListeners=[]}init(){this.getBoard(),this.board.addEventListener("click",this.onBoardClick.bind(this)),this.start()}start(){setInterval((()=>{this.generateposition()}),1e3)}generateposition(){let t=Math.floor(Math.random()*this.boardSize**2);t!==this.startPosition?(this.deleteCharacter(),this.position=t,this.getCharacter()):t=Math.floor(Math.random()*this.boardSize**2)}getCharacter(){this.startPosition=this.char.createCharacter(),this.cells[this.position].appendChild(this.startPosition)}deleteCharacter(){null!==this.startPosition&&this.cells[this.position].firstChild.remove()}getBoard(){const t=document.querySelector("body"),e=document.createElement("div");this.board=this.board.createBoard(this.boardSize),this.counter=this.gameInformation(),this.cells=[...this.board.children],e.classList.add("wrapper"),e.innerHTML="<h1 class='title'>Whack Goblin!</h1>",e.appendChild(this.counter),e.appendChild(this.board),t.insertBefore(e,t.firstChild)}gameInformation(){return this.counter=document.createElement("div"),this.counter.classList.add("information"),this.counter.innerHTML='Убито гоблинов: <span class="killed">0</span><br>Промахов: <span class="missed">0</span><br>',this.counter}onBoardClick(t){t.preventDefault(),this.killed=document.querySelector(".killed"),this.missed=document.querySelector(".missed"),this.boardListeners.forEach((e=>e(t.target))),t.target.classList.contains("goblin")?(++this.killed.textContent,t.target.classList.remove("goblin")):++this.missed.textContent,this.killed.textContent>=10&&(this.resetScore(),alert("Поздравляем! Вы одержали победу!")),this.missed.textContent>=5&&(this.resetScore(),alert("К сожалению вы проиграли..."))}resetScore(){this.missed.textContent=0,this.killed.textContent=0}}(t,e);s.init()})();